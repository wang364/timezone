import xml.etree.ElementTree as ET
import os

# 定义各种语言的翻译映射
translations = {
    "zh": {
        "时区工具设置": "时区工具设置",
        "时间显示格式": "时间显示格式",
        "时间格式:": "时间格式:",
        "24小时制": "24小时制",
        "12小时制": "12小时制",
        "选择时间的显示格式，24小时制或12小时制": "选择时间的显示格式，24小时制或12小时制",
        "选择是否在时间显示中包含秒数": "选择是否在时间显示中包含秒数",
        "日期显示格式": "日期显示格式",
        "日期格式:": "日期格式:",
        "YYYY-MM-DD": "YYYY-MM-DD",
        "MM/DD/YYYY": "MM/DD/YYYY",
        "DD/MM/YYYY": "DD/MM/YYYY",
        "选择日期的显示格式，支持多种国际标准格式": "选择日期的显示格式，支持多种国际标准格式",
        "星期格式:": "星期格式:",
        "Mon": "Mon",
        "Monday": "Monday",
        "选择星期的显示格式，简写或全称": "选择星期的显示格式，简写或全称",
        "语言:": "语言:",
        "语言设置": "语言设置",
        "选择应用程序的界面语言": "选择应用程序的界面语言",
        "中文": "中文",
        "English": "English",
        "日本語": "日本語",
        "한국어": "한국어",
        "Français": "Français",
        "Deutsch": "Deutsch",
        "Español": "Español",
        "Português": "Português",
        "启动设置": "启动设置",
        "选择是否在系统启动时自动运行应用程序": "选择是否在系统启动时自动运行应用程序",
        "开机自启动": "开机自启动",
        "显示秒数": "显示秒数",
        "显示日期": "显示日期",
        "显示星期": "显示星期",
        "选择是否在主界面显示日期信息": "选择是否在主界面显示日期信息",
        "选择是否在主界面显示星期信息": "选择是否在主界面显示星期信息",
        "常规设置": "常规设置",
        "城市管理": "城市管理",
        "保存": "保存",
        "取消": "取消",
        "添加城市:": "添加城市:",
        "输入城市名称搜索，回车或从下拉列表选择添加...": "输入城市名称搜索，回车或从下拉列表选择添加...",
        "已添加的城市:": "已添加的城市:",
        "删除": "删除",
        "上移": "上移",
        "下移": "下移",
        "时区工具": "时区工具",
        "时区": "时区",
        "设置": "设置",
        "显示时区窗口": "显示时区窗口",
        "退出": "退出",
        "隐藏时区窗口": "隐藏时区窗口",
        "当前时间: %1\n时区工具": "当前时间: %1\n时区工具",
        "时区显示": "时区显示",
        "暂无城市，请在设置中添加": "暂无城市，请在设置中添加",
        "警告": "警告",
        "请输入城市名称": "请输入城市名称",
        "确认删除": "确认删除",
        "确定要删除城市 '%1' 吗？": "确定要删除城市 '%1' 吗？",
        "城市 '%1' 未找到或不在可用列表中": "城市 '%1' 未找到或不在可用列表中",
        "重启程序": "重启程序",
        "应用新的语言设置需要重启程序": "应用新的语言设置需要重启程序",
        "确认重启": "确认重启",
        "应用新的语言设置需要重启程序，是否立即重启？": "应用新的语言设置需要重启程序，是否立即重启？"
    },
    "en": {
        "时区工具设置": "Timezone Tool Settings",
        "时间显示格式": "Time Display Format",
        "时间格式:": "Time Format:",
        "24小时制": "24-hour format",
        "12小时制": "12-hour format",
        "选择时间的显示格式，24小时制或12小时制": "Choose time display format, 24-hour or 12-hour",
        "选择是否在时间显示中包含秒数": "Choose whether to include seconds in time display",
        "日期显示格式": "Date Display Format",
        "日期格式:": "Date Format:",
        "YYYY-MM-DD": "YYYY-MM-DD",
        "MM/DD/YYYY": "MM/DD/YYYY",
        "DD/MM/YYYY": "DD/MM/YYYY",
        "选择日期的显示格式，支持多种国际标准格式": "Choose date display format, supports multiple international standard formats",
        "星期格式:": "Weekday Format:",
        "Mon": "Mon",
        "Monday": "Monday",
        "选择星期的显示格式，简写或全称": "Choose weekday display format, abbreviated or full name",
        "语言:": "Language:",
        "语言设置": "Language Settings",
        "选择应用程序的界面语言": "Choose application interface language",
        "中文": "Chinese",
        "English": "English",
        "日本語": "Japanese",
        "한국어": "Korean",
        "Français": "French",
        "Deutsch": "German",
        "Español": "Spanish",
        "Português": "Portuguese",
        "启动设置": "Startup Settings",
        "选择是否在系统启动时自动运行应用程序": "Choose whether to automatically run the application when system starts",
        "开机自启动": "Start with system",
        "显示秒数": "Show seconds",
        "显示日期": "Show date",
        "显示星期": "Show weekday",
        "选择是否在主界面显示日期信息": "Choose whether to display date information on main interface",
        "选择是否在主界面显示星期信息": "Choose whether to display weekday information on main interface",
        "常规设置": "General Settings",
        "城市管理": "City Management",
        "保存": "Save",
        "取消": "Cancel",
        "添加城市:": "Add City:",
        "输入城市名称搜索，回车或从下拉列表选择添加...": "Enter city name to search, press Enter or select from dropdown to add...",
        "已添加的城市:": "Added Cities:",
        "删除": "Delete",
        "上移": "Move Up",
        "下移": "Move Down",
        "时区工具": "Timezone Tool",
        "时区": "Timezone",
        "设置": "Settings",
        "显示时区窗口": "Show Timezone Window",
        "退出": "Exit",
        "隐藏时区窗口": "Hide Timezone Window",
        "当前时间: %1\n时区工具": "Current Time: %1\nTimezone Tool",
        "时区显示": "Timezone Display",
        "暂无城市，请在设置中添加": "No cities yet, please add in settings",
        "警告": "Warning",
        "请输入城市名称": "Please enter city name",
        "确认删除": "Confirm Deletion",
        "确定要删除城市 '%1' 吗？": "Are you sure you want to delete city '%1'?",
        "城市 '%1' 未找到或不在可用列表中": "City '%1' not found or not in available list",
        "重启程序": "Restart Application",
        "应用新的语言设置需要重启程序": "Restart required to apply new language settings",
        "确认重启": "Confirm Restart",
        "应用新的语言设置需要重启程序，是否立即重启？": "Restart required to apply new language settings. Restart now?"
    },
    "ja": {
        "时区工具设置": "タイムゾーンツールの設定",
        "时间显示格式": "時間表示形式",
        "时间格式:": "時間形式:",
        "24小时制": "24時間表示",
        "12小时制": "12時間表示",
        "选择时间的显示格式，24小时制或12小时制": "時間表示形式を選択、24時間制または12時間制",
        "选择是否在时间显示中包含秒数": "時間表示に秒を含めるかどうかを選択",
        "日期显示格式": "日付表示形式",
        "日期格式:": "日付形式:",
        "YYYY-MM-DD": "YYYY-MM-DD",
        "MM/DD/YYYY": "MM/DD/YYYY",
        "DD/MM/YYYY": "DD/MM/YYYY",
        "选择日期的显示格式，支持多种国际标准格式": "日付表示形式を選択、複数の国際標準形式をサポート",
        "星期格式:": "曜日形式:",
        "Mon": "月",
        "Monday": "月曜日",
        "选择星期的显示格式，简写或全称": "曜日表示形式を選択、略称または完全名称",
        "语言:": "言語:",
        "语言设置": "言語設定",
        "选择应用程序的界面语言": "アプリケーションのインターフェース言語を選択",
        "中文": "中国語",
        "English": "英語",
        "日本語": "日本語",
        "한국어": "韓国語",
        "Français": "フランス語",
        "Deutsch": "ドイツ語",
        "Español": "スペイン語",
        "Português": "ポルトガル語",
        "启动设置": "起動設定",
        "选择是否在系统启动时自动运行应用程序": "システム起動時にアプリケーションを自動実行するかどうかを選択",
        "开机自启动": "システム起動時に開始",
        "显示秒数": "秒を表示",
        "显示日期": "日付を表示",
        "显示星期": "曜日を表示",
        "选择是否在主界面显示日期信息": "メインインターフェースに日付情報を表示するかどうかを選択",
        "选择是否在主界面显示星期信息": "メインインターフェースに曜日情報を表示するかどうかを選択",
        "常规设置": "一般設定",
        "城市管理": "都市管理",
        "保存": "保存",
        "取消": "キャンセル",
        "添加城市:": "都市を追加:",
        "输入城市名称搜索，回车或从下拉列表选择添加...": "都市名を入力して検索し、Enterキーを押すかドロップダウンから選択して追加...",
        "已添加的城市:": "追加された都市:",
        "删除": "削除",
        "上移": "上に移動",
        "下移": "下に移動",
        "时区工具": "タイムゾーンツール",
        "时区": "タイムゾーン",
        "设置": "設定",
        "显示时区窗口": "タイムゾーンウィンドウを表示",
        "退出": "終了",
        "隐藏时区窗口": "タイムゾーンウィンドウを隠す",
        "当前时间: %1\n时区工具": "現在の時間: %1\nタイムゾーンツール",
        "时区显示": "タイムゾーン表示",
        "暂无城市，请在设置中添加": "都市がありません。設定で追加してください",
        "警告": "警告",
        "请输入城市名称": "都市名を入力してください",
        "确认删除": "削除の確認",
        "确定要删除城市 '%1' 吗？": "都市 '%1' を削除してもよろしいですか？",
        "城市 '%1' 未找到或不在可用列表中": "都市 '%1' が見つからないか、利用可能なリストに含まれていません",
        "重启程序": "アプリケーションを再起動",
        "应用新的语言设置需要重启程序": "新しい言語設定を適用するには再起動が必要です",
        "确认重启": "再起動の確認",
        "应用新的语言设置需要重启程序，是否立即重启？": "新しい言語設定を適用するには再起動が必要です。今すぐ再起動しますか？"
    },
    "ko": {
        "时区工具设置": "타임존 도구 설정",
        "时间显示格式": "시간 표시 형식",
        "时间格式:": "시간 형식:",
        "24小时制": "24시간 형식",
        "12小时制": "12시간 형식",
        "选择时间的显示格式，24小时制或12小时制": "시간 표시 형식 선택, 24시간 또는 12시간",
        "选择是否在时间显示中包含秒数": "시간 표시에 초를 포함할지 선택",
        "日期显示格式": "날짜 표시 형식",
        "日期格式:": "날짜 형식:",
        "YYYY-MM-DD": "YYYY-MM-DD",
        "MM/DD/YYYY": "MM/DD/YYYY",
        "DD/MM/YYYY": "DD/MM/YYYY",
        "选择日期的显示格式，支持多种国际标准格式": "날짜 표시 형식 선택, 여러 국제 표준 형식 지원",
        "星期格式:": "요일 형식:",
        "Mon": "월",
        "Monday": "월요일",
        "选择星期的显示格式，简写或全称": "요일 표시 형식 선택, 약어 또는 전체 이름",
        "语言:": "언어:",
        "语言设置": "언어 설정",
        "选择应用程序的界面语言": "응용 프로그램 인터페이스 언어 선택",
        "中文": "중국어",
        "English": "영어",
        "日本語": "일본어",
        "한국어": "한국어",
        "Français": "프랑스어",
        "Deutsch": "독일어",
        "Español": "스페인어",
        "Português": "포르투갈어",
        "启动设置": "시작 설정",
        "选择是否在系统启动时自动运行应用程序": "시스템 시작 시 응용 프로그램 자동 실행 여부 선택",
        "开机自启动": "시스템 시작 시 실행",
        "显示秒数": "초 표시",
        "显示日期": "날짜 표시",
        "显示星期": "요일 표시",
        "选择是否在主界面显示日期信息": "메인 인터페이스에 날짜 정보 표시 여부 선택",
        "选择是否在主界面显示星期信息": "메인 인터페이스에 요일 정보 표시 여부 선택",
        "常规设置": "일반 설정",
        "城市管理": "도시 관리",
        "保存": "저장",
        "取消": "취소",
        "添加城市:": "도시 추가:",
        "输入城市名称搜索，回车或从下拉列表选择添加...": "도시 이름을 입력하여 검색하고 Enter 키를 누르거나 드롭다운에서 선택하여 추가...",
        "已添加的城市:": "추가된 도시:",
        "删除": "삭제",
        "上移": "위로 이동",
        "下移": "아래로 이동",
        "时区工具": "타임존 도구",
        "时区": "타임존",
        "设置": "설정",
        "显示时区窗口": "타임존 창 표시",
        "退出": "종료",
        "隐藏时区窗口": "타임존 창 숨기기",
        "当前时间: %1\n时区工具": "현재 시간: %1\n타임존 도구",
        "时区显示": "타임존 표시",
        "暂无城市，请在设置中添加": "아직 도시가 없습니다. 설정에서 추가하세요",
        "警告": "경고",
        "请输入城市名称": "도시 이름을 입력하세요",
        "确认删除": "삭제 확인",
        "确定要删除城市 '%1' 吗？": "도시 '%1' 을 삭제하시겠습니까？",
        "城市 '%1' 未找到或不在可用列表中": "도시 '%1' 을 찾을 수 없거나 사용 가능한 목록에 없습니다",
        "重启程序": "응용 프로그램 다시 시작",
        "应用新的语言设置需要重启程序": "새 언어 설정을 적용하려면 다시 시작해야 합니다",
        "确认重启": "다시 시작 확인",
        "应用新的语言设置需要重启程序，是否立即重启？": "새 언어 설정을 적용하려면 다시 시작해야 합니다. 지금 다시 시작하시겠습니까?"
    },
    "fr": {
        "时区工具设置": "Paramètres de l'outil de fuseau horaire",
        "时间显示格式": "Format d'affichage de l'heure",
        "时间格式:": "Format de temps:",
        "24小时制": "Format 24h",
        "12小时制": "Format 12h",
        "选择时间的显示格式，24小时制或12小时制": "Choisir le format d'affichage de l'heure, 24h ou 12h",
        "选择是否在时间显示中包含秒数": "Choisir d'inclure les secondes dans l'affichage de l'heure",
        "日期显示格式": "Format d'affichage de la date",
        "日期格式:": "Format de date:",
        "YYYY-MM-DD": "YYYY-MM-DD",
        "MM/DD/YYYY": "MM/DD/YYYY",
        "DD/MM/YYYY": "DD/MM/YYYY",
        "选择日期的显示格式，支持多种国际标准格式": "Choisir le format d'affichage de la date, supporte plusieurs formats standards internationaux",
        "星期格式:": "Format du jour:",
        "Mon": "Lun",
        "Monday": "Lundi",
        "选择星期的显示格式，简写或全称": "Choisir le format d'affichage du jour, abrégé ou complet",
        "语言:": "Langue:",
        "语言设置": "Paramètres de langue",
        "选择应用程序的界面语言": "Choisir la langue de l'interface de l'application",
        "中文": "Chinois",
        "English": "Anglais",
        "日本語": "Japonais",
        "한국어": "Coréen",
        "Français": "Français",
        "Deutsch": "Allemand",
        "Español": "Espagnol",
        "Português": "Portugais",
        "启动设置": "Paramètres de démarrage",
        "选择是否在系统启动时自动运行应用程序": "Choisir d'exécuter automatiquement l'application au démarrage du système",
        "开机自启动": "Démarrer avec le système",
        "显示秒数": "Afficher les secondes",
        "显示日期": "Afficher la date",
        "显示星期": "Afficher le jour",
        "选择是否在主界面显示日期信息": "Choisir d'afficher les informations de date sur l'interface principale",
        "选择是否在主界面显示星期信息": "Choisir d'afficher les informations de jour sur l'interface principale",
        "常规设置": "Paramètres généraux",
        "城市管理": "Gestion des villes",
        "保存": "Enregistrer",
        "取消": "Annuler",
        "添加城市:": "Ajouter une ville:",
        "输入城市名称搜索，回车或从下拉列表选择添加...": "Entrez le nom de la ville pour rechercher, appuyez sur Entrée ou sélectionnez dans la liste déroulante pour ajouter...",
        "已添加的城市:": "Villes ajoutées:",
        "删除": "Supprimer",
        "上移": "Déplacer vers le haut",
        "下移": "Déplacer vers le bas",
        "时区工具": "Outil de fuseau horaire",
        "时区": "Fuseau horaire",
        "设置": "Paramètres",
        "显示时区窗口": "Afficher la fenêtre de fuseau horaire",
        "退出": "Quitter",
        "隐藏时区窗口": "Cacher la fenêtre de fuseau horaire",
        "当前时间: %1\n时区工具": "Heure actuelle: %1\nOutil de fuseau horaire",
        "时区显示": "Affichage de fuseau horaire",
        "暂无城市，请在设置中添加": "Aucune ville pour le moment, veuillez ajouter dans les paramètres",
        "警告": "Avertissement",
        "请输入城市名称": "Veuillez entrer le nom de la ville",
        "确认删除": "Confirmer la suppression",
        "确定要删除城市 '%1' 吗？": "Êtes-vous sûr de vouloir supprimer la ville '%1' ?",
        "城市 '%1' 未找到或不在可用列表中": "La ville '%1' n'a pas été trouvée ou n'est pas dans la liste disponible",
        "重启程序": "Redémarrer l'application",
        "应用新的语言设置需要重启程序": "Redémarrage requis pour appliquer les nouveaux paramètres de langue",
        "确认重启": "Confirmer le redémarrage",
        "应用新的语言设置需要重启程序，是否立即重启？": "Redémarrage requis pour appliquer les nouveaux paramètres de langue. Redémarrer maintenant ?"
    },
    "de": {
        "时区工具设置": "Zeitzonen-Tool-Einstellungen",
        "时间显示格式": "Zeitanzeigeformat",
        "时间格式:": "Zeitformat:",
        "24小时制": "24-Stunden-Format",
        "12小时制": "12-Stunden-Format",
        "选择时间的显示格式，24小时制或12小时制": "Zeitanzeigeformat wählen, 24-Stunden- oder 12-Stunden-Format",
        "选择是否在时间显示中包含秒数": "Wählen, ob Sekunden in der Zeitanzeige enthalten sein sollen",
        "日期显示格式": "Datumanzeigeformat",
        "日期格式:": "Datumsformat:",
        "YYYY-MM-DD": "YYYY-MM-DD",
        "MM/DD/YYYY": "MM/DD/YYYY",
        "DD/MM/YYYY": "DD/MM/YYYY",
        "选择日期的显示格式，支持多种国际标准格式": "Datumanzeigeformat wählen, unterstützt mehrere internationale Standardformate",
        "星期格式:": "Wochentagsformat:",
        "Mon": "Mo",
        "Monday": "Montag",
        "选择星期的显示格式，简写或全称": "Wochentagsanzeigeformat wählen, abgekürzt oder vollständiger Name",
        "语言:": "Sprache:",
        "语言设置": "Spracheinstellungen",
        "选择应用程序的界面语言": "Anwendungsschnittstellensprache wählen",
        "中文": "Chinesisch",
        "English": "Englisch",
        "日本語": "Japanisch",
        "한국어": "Koreanisch",
        "Français": "Französisch",
        "Deutsch": "Deutsch",
        "Español": "Spanisch",
        "Português": "Portugiesisch",
        "启动设置": "Starteinstellungen",
        "选择是否在系统启动时自动运行应用程序": "Wählen, ob die Anwendung beim Systemstart automatisch ausgeführt werden soll",
        "开机自启动": "Mit System starten",
        "显示秒数": "Sekunden anzeigen",
        "显示日期": "Datum anzeigen",
        "显示星期": "Wochentag anzeigen",
        "选择是否在主界面显示日期信息": "Wählen, ob Datumsinformationen auf der Hauptoberfläche angezeigt werden sollen",
        "选择是否在主界面显示星期信息": "Wählen, ob Wochentagsinformationen auf der Hauptoberfläche angezeigt werden sollen",
        "常规设置": "Allgemeine Einstellungen",
        "城市管理": "Stadtverwaltung",
        "保存": "Speichern",
        "取消": "Abbrechen",
        "添加城市:": "Stadt hinzufügen:",
        "输入城市名称搜索，回车或从下拉列表选择添加...": "Geben Sie den Stadtnamen ein, um zu suchen, drücken Sie Enter oder wählen Sie aus der Dropdown-Liste zum Hinzufügen...",
        "已添加的城市:": "Hinzugefügte Städte:",
        "删除": "Löschen",
        "上移": "Nach oben bewegen",
        "下移": "Nach unten bewegen",
        "时区工具": "Zeitzonen-Tool",
        "时区": "Zeitzone",
        "设置": "Einstellungen",
        "显示时区窗口": "Zeitzonenfenster anzeigen",
        "退出": "Beenden",
        "隐藏时区窗口": "Zeitzonenfenster ausblenden",
        "当前时间: %1\n时区工具": "Aktuelle Zeit: %1\nZeitzonen-Tool",
        "时区显示": "Zeitzonenanzeige",
        "暂无城市，请在设置中添加": "Keine Städte vorhanden, bitte in den Einstellungen hinzufügen",
        "警告": "Warnung",
        "请输入城市名称": "Bitte geben Sie den Stadtnamen ein",
        "确认删除": "Löschbestätigung",
        "确定要删除城市 '%1' 吗？": "Sind Sie sicher, dass Sie die Stadt '%1' löschen möchten?",
        "城市 '%1' 未找到或不在可用列表中": "Stadt '%1' nicht gefunden oder nicht in der verfügbaren Liste",
        "重启程序": "Anwendung neu starten",
        "应用新的语言设置需要重启程序": "Neustart erforderlich, um neue Spracheinstellungen anzuwenden",
        "确认重启": "Neustart bestätigen",
        "应用新的语言设置需要重启程序，是否立即重启？": "Neustart erforderlich, um neue Spracheinstellungen anzuwenden. Jetzt neu starten?"
    },
    "es": {
        "时区工具设置": "Configuración de la herramienta de zona horaria",
        "时间显示格式": "Formato de visualización de hora",
        "时间格式:": "Formato de hora:",
        "24小时制": "Formato 24h",
        "12小时制": "Formato 12h",
        "选择时间的显示格式，24小时制或12小时制": "Elegir formato de visualización de hora, 24h o 12h",
        "选择是否在时间显示中包含秒数": "Elegir si incluir segundos en la visualización de hora",
        "日期显示格式": "Formato de visualización de fecha",
        "日期格式:": "Formato de fecha:",
        "YYYY-MM-DD": "YYYY-MM-DD",
        "MM/DD/YYYY": "MM/DD/YYYY",
        "DD/MM/YYYY": "DD/MM/YYYY",
        "选择日期的显示格式，支持多种国际标准格式": "Elegir formato de visualización de fecha, soporta múltiples formatos estándar internacionales",
        "星期格式:": "Formato de día:",
        "Mon": "Lun",
        "Monday": "Lunes",
        "选择星期的显示格式，简写或全称": "Elegir formato de visualización de día, abreviado o completo",
        "语言:": "Idioma:",
        "语言设置": "Configuración de idioma",
        "选择应用程序的界面语言": "Elegir idioma de la interfaz de la aplicación",
        "中文": "Chino",
        "English": "Inglés",
        "日本語": "Japonés",
        "한국어": "Coreano",
        "Français": "Francés",
        "Deutsch": "Alemán",
        "Español": "Español",
        "Português": "Portugués",
        "启动设置": "Configuración de inicio",
        "选择是否在系统启动时自动运行应用程序": "Elegir si ejecutar automáticamente la aplicación al iniciar el sistema",
        "开机自启动": "Iniciar con el sistema",
        "显示秒数": "Mostrar segundos",
        "显示日期": "Mostrar fecha",
        "显示星期": "Mostrar día",
        "选择是否在主界面显示日期信息": "Elegir si mostrar información de fecha en la interfaz principal",
        "选择是否在主界面显示星期信息": "Elegir si mostrar información de día en la interfaz principal",
        "常规设置": "Configuración general",
        "城市管理": "Gestión de ciudades",
        "保存": "Guardar",
        "取消": "Cancelar",
        "添加城市:": "Agregar ciudad:",
        "输入城市名称搜索，回车或从下拉列表选择添加...": "Ingrese el nombre de la ciudad para buscar, presione Enter o seleccione de la lista desplegable para agregar...",
        "已添加的城市:": "Ciudades agregadas:",
        "删除": "Eliminar",
        "上移": "Mover arriba",
        "下移": "Mover abajo",
        "时区工具": "Herramienta de zona horaria",
        "时区": "Zona horaria",
        "设置": "Configuración",
        "显示时区窗口": "Mostrar ventana de zona horaria",
        "退出": "Salir",
        "隐藏时区窗口": "Ocultar ventana de zona horaria",
        "当前时间: %1\n时区工具": "Hora actual: %1\nHerramienta de zona horaria",
        "时区显示": "Visualización de zona horaria",
        "暂无城市，请在设置中添加": "No hay ciudades todavía, por favor agrégue en la configuración",
        "警告": "Advertencia",
        "请输入城市名称": "Por favor, ingrese el nombre de la ciudad",
        "确认删除": "Confirmar eliminación",
        "确定要删除城市 '%1' 吗？": "¿Está seguro de que desea eliminar la ciudad '%1'?",
        "城市 '%1' 未找到或不在可用列表中": "Ciudad '%1' no encontrada o no está en la lista disponible",
        "重启程序": "Reiniciar aplicación",
        "应用新的语言设置需要重启程序": "Reinicio necesario para aplicar nuevos ajustes de idioma",
        "确认重启": "Confirmar reinicio",
        "应用新的语言设置需要重启程序，是否立即重启？": "Reinicio necesario para aplicar nuevos ajustes de idioma. ¿Reiniciar ahora?"
    },
    "pt": {
        "时区工具设置": "Configurações da ferramenta de fuso horário",
        "时间显示格式": "Formato de exibição de hora",
        "时间格式:": "Formato de hora:",
        "24小时制": "Formato 24h",
        "12小时制": "Formato 12h",
        "选择时间的显示格式，24小时制或12小时制": "Escolher formato de exibição de hora, 24h ou 12h",
        "选择是否在时间显示中包含秒数": "Escolher se incluir segundos na exibição de hora",
        "日期显示格式": "Formato de exibição de data",
        "日期格式:": "Formato de data:",
        "YYYY-MM-DD": "YYYY-MM-DD",
        "MM/DD/YYYY": "MM/DD/YYYY",
        "DD/MM/YYYY": "DD/MM/YYYY",
        "选择日期的显示格式，支持多种国际标准格式": "Escolher formato de exibição de data, suporta múltiplos formatos padrão internacionais",
        "星期格式:": "Formato do dia:",
        "Mon": "Seg",
        "Monday": "Segunda-feira",
        "选择星期的显示格式，简写或全称": "Escolher formato de exibição do dia, abreviado ou completo",
        "语言:": "Idioma:",
        "语言设置": "Configurações de idioma",
        "选择应用程序的界面语言": "Escolher idioma da interface do aplicativo",
        "中文": "Chinês",
        "English": "Inglês",
        "日本語": "Japonês",
        "한국어": "Coreano",
        "Français": "Francês",
        "Deutsch": "Alemão",
        "Español": "Espanhol",
        "Português": "Português",
        "启动设置": "Configurações de inicialização",
        "选择是否在系统启动时自动运行应用程序": "Escolher se executar automaticamente o aplicativo ao iniciar o sistema",
        "开机自启动": "Iniciar com o sistema",
        "显示秒数": "Mostrar segundos",
        "显示日期": "Mostrar data",
        "显示星期": "Mostrar dia",
        "选择是否在主界面显示日期信息": "Escolher se exibir informações de data na interface principal",
        "选择是否在主界面显示星期信息": "Escolher se exibir informações de dia na interface principal",
        "常规设置": "Configurações gerais",
        "城市管理": "Gerenciamento de cidades",
        "保存": "Salvar",
        "取消": "Cancelar",
        "添加城市:": "Adicionar cidade:",
        "输入城市名称搜索，回车或从下拉列表选择添加...": "Digite o nome da cidade para pesquisar, pressione Enter ou selecione na lista suspensa para adicionar...",
        "已添加的城市:": "Cidades adicionadas:",
        "删除": "Excluir",
        "上移": "Mover para cima",
        "下移": "Mover para baixo",
        "时区工具": "Ferramenta de fuso horário",
        "时区": "Fuso horário",
        "设置": "Configurações",
        "显示时区窗口": "Mostrar janela de fuso horário",
        "退出": "Sair",
        "隐藏时区窗口": "Ocultar janela de fuso horário",
        "当前时间: %1\n时区工具": "Hora atual: %1\nFerramenta de fuso horário",
        "时区显示": "Exibição de fuso horário",
        "暂无城市，请在设置中添加": "Nenhuma cidade ainda, por favor adicione nas configurações",
        "警告": "Aviso",
        "请输入城市名称": "Por favor, digite o nome da cidade",
        "确认删除": "Confirmar exclusão",
        "确定要删除城市 '%1' 吗？": "Tem certeza que deseja excluir a cidade '%1'?",
        "城市 '%1' 未找到或不在可用列表中": "Cidade '%1' não encontrada ou não está na lista disponível",
        "重启程序": "Reiniciar aplicativo",
        "应用新的语言设置需要重启程序": "Reinicialização necessária para aplicar novas configurações de idioma",
        "确认重启": "Confirmar reinicialização",
        "应用新的语言设置需要重启程序，是否立即重启？": "Reinicialização necessária para aplicar novas configurações de idioma. Reiniciar agora?"
    }
}

# 获取所有.ts文件
ts_files = [f for f in os.listdir('.') if f.endswith('.ts')]

for ts_file in ts_files:
    # 获取语言代码（例如：timezone_zh.ts -> zh）
    lang_code = ts_file.split('_')[1].split('.')[0]
    
    if lang_code not in translations:
        print(f"警告: 没有找到语言 {lang_code} 的翻译映射")
        continue
    
    # 解析XML文件
    tree = ET.parse(ts_file)
    root = tree.getroot()
    
    # 遍历所有message标签，更新翻译
    for context in root.findall('context'):
        for message in context.findall('message'):
            source = message.find('source')
            if source is not None and source.text in translations[lang_code]:
                translation = message.find('translation')
                if translation is not None:
                    # 更新翻译内容并移除unfinished标记
                    translation.text = translations[lang_code][source.text]
                    if 'type' in translation.attrib:
                        del translation.attrib['type']
    
    # 保存更新后的文件
    tree.write(ts_file, encoding='utf-8', xml_declaration=True)
    print(f"已更新 {ts_file}")

print("翻译完成!")
